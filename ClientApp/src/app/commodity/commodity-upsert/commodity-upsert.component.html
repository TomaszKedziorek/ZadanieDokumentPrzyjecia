<section class="container">

  <h1 class="middle-line">Commodity</h1>
  <h2 class="text-center">{{header}}</h2>

  <div class="my-5" *ngIf="commodity">
    <form #form="ngForm" (ngSubmit)="onSubmit(form)">

      <input [(ngModel)]="commodity.id" #id="ngModel" type="number" name="id" hidden>
      <input [(ngModel)]="commodity.admissionDocumentId" #id="ngModel" type="number" name="admissionDocumentId" hidden>

      <div class="mb-3 row">
        <label for="name" class="col-sm-2 col-form-label">Name</label>
        <div class="col-sm-10">
          <input [(ngModel)]="commodity.name" #name="ngModel" required minlength="3" maxlength="100"
            class="form-control" type="text" id="name" name="name"
            [ngClass]="{'is-invalid':name.touched && name.invalid}">
          <div *ngIf="name.errors?.['required']" class="invalid-feedback">
            <div>This field is required!</div>
          </div>
          <div *ngIf="name.errors?.['minlength'] || name.errors?.['maxlength']" class="invalid-feedback">
            <div>This field must be 3-100 characters long!</div>
          </div>
        </div>
      </div>

      <div class="mb-3 row">
        <label for="code" class="col-sm-2 col-form-label">Code</label>
        <div class="col-sm-10">
          <input [(ngModel)]="commodity.code" #code="ngModel" required class="form-control" type="text" id="code"
            name="code" [ngClass]="{'is-invalid':code.touched && code.invalid}">
          <div *ngIf="code.errors?.['required']" class="invalid-feedback">
            <div *ngIf="code.touched && code.invalid">This field is required!</div>
          </div>
        </div>
      </div>

      <div class="mb-3 row">
        <label for="quantity" class="col-sm-2 col-form-label">Quantity</label>
        <div class="col-sm-10">
          <input [(ngModel)]="commodity.quantity" #quantity="ngModel" required min="1" step="1" pattern="^[0-9]*$"
            class="form-control" type="number" id="quantity" name="quantity"
            [ngClass]="{'is-invalid':quantity.touched && quantity.invalid}">
          <div *ngIf="quantity.errors?.['required']" class="invalid-feedback">
            <div>This field is required!</div>
          </div>
          <div *ngIf="quantity.errors?.['min'] || quantity.errors?.['pattern']" class="invalid-feedback">
            <div>This field is invalid!</div>
          </div>
        </div>
      </div>

      <div class="mb-3 row">
        <label for="price" class="col-sm-2 col-form-label">Price</label>
        <div class="col-sm-10">
          <input [(ngModel)]="commodity.price" #price="ngModel" required min="0" step="0.01" class="form-control"
            type="number" id="price" name="price" [ngClass]="{'is-invalid':price.touched && price.invalid}">
          <div *ngIf="price.errors?.['required']" class="invalid-feedback">
            <div>This field is required!</div>
          </div>
          <div *ngIf="price.errors?.['min']" class="invalid-feedback">
            <div>This field is invalid!</div>
          </div>
        </div>
      </div>

      <div class="mb-3 row justify-content-end">
        <div class="col-sm-10">
          <button *ngIf="commodity.id" [disabled]="form.invalid" type="submit"
            class="col-12 col-sm-3 me-sm-2 my-2 my-sm-0 btn btn-info">Update</button>

          <button *ngIf="!commodity.id" [disabled]="form.invalid" type="submit"
            class="col-12 col-sm-3 me-sm-2 my-2 my-sm-0 btn btn-success">Create</button>

          <button routerLink="{{returnUrl}}" type="button"
            class="col-12 col-sm-3 mx-sm-2 my-2 my-sm-0 btn btn-secondary">Back</button>

          <button *ngIf="commodity.id" (click)="deleteCommodity()" type="button"
            class="col-12 col-sm-3 ms-sm-2 my-2 my-sm-0 btn btn-danger">Delete</button>
        </div>
      </div>
    </form>
  </div>

</section>