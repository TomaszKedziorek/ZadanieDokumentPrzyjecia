<section class="container">

  <h1 class="middle-line">Supplier</h1>
  <h2 class="text-center">{{header}}</h2>

  <div class="my-5" *ngIf="supplier">
    <form #form="ngForm" (ngSubmit)="onSubmit(form)">

      <input [(ngModel)]="supplier.id" #id="ngModel" type="number" name="id" hidden>

      <div class="mb-3 row">
        <label for="companyName" class="col-sm-2 col-form-label">Company Name</label>
        <div class="col-sm-10">
          <input [(ngModel)]="supplier.companyName" #companyName="ngModel" required minlength="3" maxlength="100"
            class="form-control" type="text" id="companyName" name="companyName"
            [ngClass]="{'is-invalid':companyName.touched && companyName.invalid}">
          <div *ngIf="companyName.errors?.['required']" class="invalid-feedback">
            <div>This field is required!</div>
          </div>
          <div *ngIf="companyName.errors?.['minlength'] || companyName.errors?.['maxlength']" class="invalid-feedback">
            <div>This field must be 3-100 characters long!</div>
          </div>
        </div>
      </div>

      <hr>

      <div class="mb-3 row row-cols-1 row-cols-sm-2">

        <label for="country" class="col-sm-2 col-form-label mb-sm-3">Country</label>
        <div class="col-sm-4">
          <input [(ngModel)]="supplier.country" #country="ngModel" required minlength="3" maxlength="100"
            class="form-control" type="text" id="country" name="country"
            [ngClass]="{'is-invalid':country.touched && country.invalid}">
          <div *ngIf="country.errors?.['required']" class="invalid-feedback">
            <div>This field is required!</div>
          </div>
          <div *ngIf="country.errors?.['minlength'] || country.errors?.['maxlength']" class="invalid-feedback">
            <div>This field must be 3-100 characters long!</div>
          </div>
        </div>

        <label for="state" class="col-sm-2 col-form-label mb-sm-3">State</label>
        <div class="col-sm-4">
          <input [(ngModel)]="supplier.state" #state="ngModel" required minlength="3" maxlength="100"
            class="form-control" type="text" id="state" name="state"
            [ngClass]="{'is-invalid':state.touched && state.invalid}">
          <div *ngIf="state.errors?.['required']" class="invalid-feedback">
            <div>This field is required!</div>
          </div>
          <div *ngIf="state.errors?.['minlength'] || state.errors?.['maxlength']" class="invalid-feedback">
            <div>This field must be 3-100 characters long!</div>
          </div>
        </div>

        <label for="city" class="col-sm-2 col-form-label mb-sm-3">City</label>
        <div class="col-sm-4">
          <input [(ngModel)]="supplier.city" #city="ngModel" required minlength="3" maxlength="100" class="form-control"
            type="text" id="city" name="city" [ngClass]="{'is-invalid':city.touched && city.invalid}">
          <div *ngIf="city.errors?.['required']" class="invalid-feedback">
            <div>This field is required!</div>
          </div>
          <div *ngIf="city.errors?.['minlength'] || city.errors?.['maxlength']" class="invalid-feedback">
            <div>This field must be 3-100 characters long!</div>
          </div>
        </div>
        <!-- ^\d{2,5}(?:[-\s]\d{1,4})?$ -->
        <label for="zipCode" class="col-sm-2 col-form-label mb-sm-3">Zip Code</label>
        <div class="col-sm-4">
          <input [(ngModel)]="supplier.zipCode" #zipCode="ngModel" required pattern="\d{2,5}(?:[\-\\s]\d{1,4})?"
            class="form-control" type="text" id="zipCode" name="zipCode"
            [ngClass]="{'is-invalid':zipCode.touched && zipCode.invalid}">
          <div *ngIf="zipCode.errors?.['required']" class="invalid-feedback">
            <div>This field is required!</div>
          </div>
          <div *ngIf="zipCode.errors?.['pattern']" class="invalid-feedback">
            <div>This field is invalid!</div>
          </div>
        </div>

        <label for="street" class="col-sm-2 col-form-label mb-sm-3">Street</label>
        <div class="col-sm-4">
          <input [(ngModel)]="supplier.street" #street="ngModel" required minlength="3" maxlength="100"
            class="form-control" type="text" id="street" name="street"
            [ngClass]="{'is-invalid':street.touched && street.invalid}">
          <div *ngIf="street.errors?.['required']" class="invalid-feedback">
            <div>This field is required!</div>
          </div>
          <div *ngIf="street.errors?.['minlength'] || street.errors?.['maxlength']" class="invalid-feedback">
            <div>This field must be 3-100 characters long!</div>
          </div>
        </div>

      </div>

      <div class="mb-3 row justify-content-end">
        <div class="col-sm-10">
          <button *ngIf="supplier.id" [disabled]="form.invalid" type="submit"
            class="col-12 col-sm-3 me-sm-2 my-2 my-sm-0 btn btn-info">Update</button>

          <button *ngIf="!supplier.id" [disabled]="form.invalid" type="submit"
            class="col-12 col-sm-3 me-sm-2 my-2 my-sm-0 btn btn-success">Create</button>

          <button routerLink="/suppliers" type="button"
            class="col-12 col-sm-3 mx-sm-2 my-2 my-sm-0 btn btn-secondary">Back</button>

          <button *ngIf="supplier.id" (click)="deleteSupplier()" type="button"
            class="col-12 col-sm-3 ms-sm-2 my-2 my-sm-0 btn btn-danger">Delete</button>
        </div>
      </div>
    </form>
  </div>

</section>